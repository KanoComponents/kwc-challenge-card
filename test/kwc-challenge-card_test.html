<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>kwc-challenge-card test</title>

    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <script src="../../web-component-tester/browser.js"></script>

    <link rel="import" href="../kwc-challenge-card.html">
  </head>
  <body>
    <test-fixture id="basic">
      <template>
        <kwc-challenge-card></kwc-challenge-card>
      </template>
    </test-fixture>

    <test-fixture id="default">
        <template>
          <kwc-challenge-card
            label="Challenge Card"
            imgurl="https://www.tonymacx86.com/data/avatars/l/1342/1342909.jpg"
            title="Chatterbox"
            challegeid="pixel_talking_mouth"
          ></kwc-challenge-card>
        </template>
    </test-fixture>

    <test-fixture id="completed">
        <template>
          <kwc-challenge-card
            label="Challenge Card"
            imgurl="https://www.tonymacx86.com/data/avatars/l/1342/1342909.jpg"
            title="Chatterbox"
            challegeid="pixel_talking_mouth"
            completed
          ></kwc-challenge-card>
        </template>
    </test-fixture>

    <script>
      suite('kwc-challenge-card', function() {
        test('instantiating the element works', function() {
          var element = fixture('basic');
          assert.equal(element.is, 'kwc-challenge-card');
        });
      });
      suite('ready', function() {
        var element;
        setup(function () {
            element = fixture('default');
        });
        test('instantiating the element works', function() {
          assert.equal(element.is, 'kwc-challenge-card');
        });
        test('title is set', function() {
          var titleElm = Polymer.dom(element.root).querySelector('#title');
          assert.equal(titleElm.textContent, 'Chatterbox');
        });
        test('challenge is not showing completed icon', function(done) {
          flush(function() {
            var iconElms = Polymer.dom(element.root).querySelectorAll('iron-icon');
            assert.lengthOf(iconElms, 0);
            done();
          });
        });
      });
      suite('completed', function() {
        var element;
        setup(function () {
            element = fixture('completed');
        });
        test('instantiating the element works', function() {
          assert.equal(element.is, 'kwc-challenge-card');
        });
        test('challenge is showing completed icon', function(done) {
          flush(function() {
            var iconElms = Polymer.dom(element.root).querySelectorAll('iron-icon');
            assert.lengthOf(iconElms, 1);
            done();
          });
        });
      });
    </script>
  </body>
</html>
